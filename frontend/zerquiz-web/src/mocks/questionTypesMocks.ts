import { MockApiService } from '../lib/mockApi';
import { generateUUID } from '../lib/mockStorage';

// ==================== SORU TİPLERİ (65+ Tip) ====================

export interface QuestionType {
  id: string;
  code: string;
  name: string;
  description?: string;
  category: 'classic' | 'interactive' | 'multimedia' | 'language' | 'stem' | 'performance' | 'survey' | 'ai';
  answerType: 'options' | 'options_multiple' | 'boolean' | 'text_input' | 'text_long' | 'number' | 'matching' | 'ordering' | 'file_upload' | 'code' | 'none';
  minOptions?: number;
  maxOptions?: number;
  requiresMedia?: boolean;
  requiresAnswer?: boolean;
  displayOrder: number;
  createdAt?: string;
  updatedAt?: string;
}

const questionTypesSeedData: Omit<QuestionType, 'createdAt' | 'updatedAt'>[] = [
  // ==================== 1) KLASİK SINAV / TEST SORU TİPLERİ ====================
  {
    id: generateUUID(),
    code: 'single_choice_mcq',
    name: 'Çoktan Seçmeli (Single Choice – MCQ)',
    description: 'Tek doğru cevaplı klasik test sorusu',
    category: 'classic',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 1,
  },
  {
    id: generateUUID(),
    code: 'multiple_select_msq',
    name: 'Birden Fazla Doğru Cevaplı (Multiple Select – MSQ)',
    description: 'Çoklu seçim yapılabilen soru',
    category: 'classic',
    answerType: 'options_multiple',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 2,
  },
  {
    id: generateUUID(),
    code: 'true_false',
    name: 'Doğru / Yanlış (True–False)',
    description: 'İki seçenekli doğru-yanlış sorusu',
    category: 'classic',
    answerType: 'boolean',
    minOptions: 2,
    maxOptions: 2,
    requiresAnswer: true,
    displayOrder: 3,
  },
  {
    id: generateUUID(),
    code: 'short_answer',
    name: 'Kısa Cevap (Short Answer)',
    description: 'Kısa metin yanıtı gerektiren soru',
    category: 'classic',
    answerType: 'text_input',
    requiresAnswer: true,
    displayOrder: 4,
  },
  {
    id: generateUUID(),
    code: 'essay_written',
    name: 'Uzun Cevap (Essay / Written Response)',
    description: 'Detaylı yazılı yanıt gerektiren soru',
    category: 'classic',
    answerType: 'text_long',
    requiresAnswer: true,
    displayOrder: 5,
  },
  {
    id: generateUUID(),
    code: 'fill_blanks_cloze',
    name: 'Boşluk Doldurma (Fill in the Blanks – Cloze)',
    description: 'Metin içi boşluk doldurma',
    category: 'classic',
    answerType: 'text_input',
    requiresAnswer: true,
    displayOrder: 6,
  },
  {
    id: generateUUID(),
    code: 'open_ended',
    name: 'Açık Uçlu Metin (Open-ended Text)',
    description: 'Serbest metin yanıtı',
    category: 'classic',
    answerType: 'text_long',
    requiresAnswer: true,
    displayOrder: 7,
  },
  {
    id: generateUUID(),
    code: 'numeric_input',
    name: 'Sayısal Cevap (Numeric Input)',
    description: 'Numerik değer girişi',
    category: 'classic',
    answerType: 'number',
    requiresAnswer: true,
    displayOrder: 8,
  },
  {
    id: generateUUID(),
    code: 'ordering_sequence',
    name: 'Sıralama / Sıra Belirleme (Ordering Sequence)',
    description: 'Öğeleri doğru sıraya dizme',
    category: 'classic',
    answerType: 'ordering',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 9,
  },
  {
    id: generateUUID(),
    code: 'matching_pairs',
    name: 'Eşleştirme (Matching Pairs)',
    description: 'İki liste arasında eşleştirme',
    category: 'classic',
    answerType: 'matching',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 10,
  },
  {
    id: generateUUID(),
    code: 'table_matching',
    name: 'Tablo Üzerinde Eşleştirme',
    description: 'Tablo formatında eşleştirme',
    category: 'classic',
    answerType: 'matching',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 11,
  },
  {
    id: generateUUID(),
    code: 'matrix_type',
    name: 'Kıyaslama / Eşleşen Seçim (Matrix Type)',
    description: 'Matris şeklinde çoklu seçim',
    category: 'classic',
    answerType: 'options_multiple',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 12,
  },

  // ==================== 2) İLERİ SEVİYE ETKİLEŞİMLİ SORU TİPLERİ ====================
  {
    id: generateUUID(),
    code: 'drag_drop_text',
    name: 'Sürükle-Bırak → Metin (Drag-and-Drop Text)',
    description: 'Metin öğelerini sürükle-bırak ile yerleştirme',
    category: 'interactive',
    answerType: 'ordering',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 13,
  },
  {
    id: generateUUID(),
    code: 'drag_drop_image',
    name: 'Sürükle-Bırak → Görsel (Drag-and-Drop Image)',
    description: 'Görsel öğeleri sürükle-bırak ile yerleştirme',
    category: 'interactive',
    answerType: 'ordering',
    minOptions: 2,
    maxOptions: 10,
    requiresMedia: true,
    requiresAnswer: true,
    displayOrder: 14,
  },
  {
    id: generateUUID(),
    code: 'hotspot',
    name: 'Görüntü Üzerinde İşaretleme (Hotspot Question)',
    description: 'Görsel üzerinde belirli noktayı işaretleme',
    category: 'interactive',
    answerType: 'none',
    requiresMedia: true,
    requiresAnswer: true,
    displayOrder: 15,
  },
  {
    id: generateUUID(),
    code: 'multi_hotspot',
    name: 'Görüntü Üzerinde Çoklu Nokta İşaretleme',
    description: 'Görsel üzerinde birden fazla nokta işaretleme',
    category: 'interactive',
    answerType: 'none',
    requiresMedia: true,
    requiresAnswer: true,
    displayOrder: 16,
  },
  {
    id: generateUUID(),
    code: 'image_labeling',
    name: 'Etiketleme (Image Labeling)',
    description: 'Görsel öğelerine etiket atama',
    category: 'interactive',
    answerType: 'matching',
    minOptions: 2,
    maxOptions: 10,
    requiresMedia: true,
    requiresAnswer: true,
    displayOrder: 17,
  },
  {
    id: generateUUID(),
    code: 'map_point_select',
    name: 'Harita Üzerinde Nokta Seçme (Map Point Select)',
    description: 'Haritada belirli konumu işaretleme',
    category: 'interactive',
    answerType: 'none',
    requiresMedia: true,
    requiresAnswer: true,
    displayOrder: 18,
  },
  {
    id: generateUUID(),
    code: 'area_selection',
    name: 'Görsel Alan Seçme (Area Selection)',
    description: 'Görsel üzerinde alan/bölge seçimi',
    category: 'interactive',
    answerType: 'none',
    requiresMedia: true,
    requiresAnswer: true,
    displayOrder: 19,
  },
  {
    id: generateUUID(),
    code: 'simulation_based',
    name: 'Simülasyon Tabanlı Soru',
    description: 'Etkileşimli simülasyon ile soru',
    category: 'interactive',
    answerType: 'none',
    requiresAnswer: true,
    displayOrder: 20,
  },
  {
    id: generateUUID(),
    code: '3d_model_marking',
    name: '3D Model Üzerinde İşaretleme',
    description: '3 boyutlu model üzerinde etkileşim',
    category: 'interactive',
    answerType: 'none',
    requiresMedia: true,
    requiresAnswer: true,
    displayOrder: 21,
  },
  {
    id: generateUUID(),
    code: 'sorting_categories',
    name: 'Sürükle-Bırak Kategori Ayırma (Sorting Into Categories)',
    description: 'Öğeleri kategorilere sürükle-bırak ile ayırma',
    category: 'interactive',
    answerType: 'matching',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 22,
  },

  // ==================== 3) MEDYA / ÇOKLU ORTAM TABANLI SORULAR ====================
  {
    id: generateUUID(),
    code: 'video_prompt',
    name: 'Video Tabanlı Soru (Video-Prompt Question)',
    description: 'Video izlettirip soru sorma',
    category: 'multimedia',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresMedia: true,
    requiresAnswer: true,
    displayOrder: 23,
  },
  {
    id: generateUUID(),
    code: 'audio_response',
    name: 'Ses Dinleme – Cevaplama (Audio Response)',
    description: 'Ses kaydı dinleyip cevaplama',
    category: 'multimedia',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresMedia: true,
    requiresAnswer: true,
    displayOrder: 24,
  },
  {
    id: generateUUID(),
    code: 'speech_oral_exam',
    name: 'Konuşarak Cevap – Mikrofon Kaydı (Speech / Oral Exam)',
    description: 'Sesli yanıt kaydı alma',
    category: 'multimedia',
    answerType: 'file_upload',
    requiresAnswer: true,
    displayOrder: 25,
  },
  {
    id: generateUUID(),
    code: 'image_prompt',
    name: 'Resim Tabanlı Soru (Image Prompt)',
    description: 'Görsel ipucu ile soru',
    category: 'multimedia',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresMedia: true,
    requiresAnswer: true,
    displayOrder: 26,
  },
  {
    id: generateUUID(),
    code: 'gif_animation',
    name: 'GIF / Animasyon İpucuyla Soru',
    description: 'Hareketli görsel ile soru',
    category: 'multimedia',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresMedia: true,
    requiresAnswer: true,
    displayOrder: 27,
  },
  {
    id: generateUUID(),
    code: 'pdf_document',
    name: 'PDF Üzerinde Soru (Document-Based Assessment)',
    description: 'Doküman tabanlı değerlendirme',
    category: 'multimedia',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresMedia: true,
    requiresAnswer: true,
    displayOrder: 28,
  },
  {
    id: generateUUID(),
    code: 'reading_comprehension',
    name: 'Okuma Parçası – Bağlantılı Soru (Reading Comprehension)',
    description: 'Uzun metin okutup soru sorma',
    category: 'multimedia',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 29,
  },

  // ==================== 4) YABANCI DİL & AKADEMİK SORU TİPLERİ ====================
  {
    id: generateUUID(),
    code: 'listening',
    name: 'Listening (Dinleme) Soru Tipi',
    description: 'Yabancı dil dinleme sorusu',
    category: 'language',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresMedia: true,
    requiresAnswer: true,
    displayOrder: 30,
  },
  {
    id: generateUUID(),
    code: 'speaking',
    name: 'Speaking (Konuşma)',
    description: 'Sözlü ifade değerlendirme',
    category: 'language',
    answerType: 'file_upload',
    requiresAnswer: true,
    displayOrder: 31,
  },
  {
    id: generateUUID(),
    code: 'reading',
    name: 'Reading (Okuduğunu Anlama)',
    description: 'Metin anlama ve yorumlama',
    category: 'language',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 32,
  },
  {
    id: generateUUID(),
    code: 'writing_composition',
    name: 'Writing (Yazma / Kompozisyon)',
    description: 'Yazılı anlatım değerlendirme',
    category: 'language',
    answerType: 'text_long',
    requiresAnswer: true,
    displayOrder: 33,
  },
  {
    id: generateUUID(),
    code: 'main_idea',
    name: 'Paragrafta Anlam – Ana Fikir',
    description: 'Metnin ana fikrini bulma',
    category: 'language',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 34,
  },
  {
    id: generateUUID(),
    code: 'cloze_test',
    name: 'Cloze Test (Metin içi boşluk doldurma)',
    description: 'Metin bütünlüğünde boşluk doldurma',
    category: 'language',
    answerType: 'text_input',
    requiresAnswer: true,
    displayOrder: 35,
  },
  {
    id: generateUUID(),
    code: 'synonym_antonym',
    name: 'Kelime – Eş Anlam / Zıt Anlam Soruları',
    description: 'Kelime bilgisi soruları',
    category: 'language',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 36,
  },
  {
    id: generateUUID(),
    code: 'translation',
    name: 'Çeviri (Translation)',
    description: 'Diller arası çeviri sorusu',
    category: 'language',
    answerType: 'text_long',
    requiresAnswer: true,
    displayOrder: 37,
  },
  {
    id: generateUUID(),
    code: 'grammar_focused',
    name: 'Gramer Odaklı Sorular',
    description: 'Dilbilgisi kuralları',
    category: 'language',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 38,
  },
  {
    id: generateUUID(),
    code: 'paragraph_ordering',
    name: 'Paragraf Sıralama / Cümle Sıralama',
    description: 'Metni mantıksal sıraya dizme',
    category: 'language',
    answerType: 'ordering',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 39,
  },
  {
    id: generateUUID(),
    code: 'dialogue_completion',
    name: 'Diyalog Tamamlama',
    description: 'Konuşma metni tamamlama',
    category: 'language',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 40,
  },

  // ==================== 5) KODLAMA / TEKNİK / STEM SORU TİPLERİ ====================
  {
    id: generateUUID(),
    code: 'coding_question',
    name: 'Kod Yazma Sorusu (Coding Question)',
    description: 'Programlama kodu yazma',
    category: 'stem',
    answerType: 'code',
    requiresAnswer: true,
    displayOrder: 41,
  },
  {
    id: generateUUID(),
    code: 'code_run_validate',
    name: 'Kod Çalıştırma (Run & Validate Code with Test Cases)',
    description: 'Kod çalıştırıp test etme',
    category: 'stem',
    answerType: 'code',
    requiresAnswer: true,
    displayOrder: 42,
  },
  {
    id: generateUUID(),
    code: 'debugging',
    name: 'Hata Bulma (Debugging)',
    description: 'Koddaki hatayı bulma',
    category: 'stem',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 43,
  },
  {
    id: generateUUID(),
    code: 'output_prediction',
    name: 'Çıktı Tahmini (Output Prediction)',
    description: 'Kodun çıktısını tahmin etme',
    category: 'stem',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 44,
  },
  {
    id: generateUUID(),
    code: 'math_formula_latex',
    name: 'Matematik Formül Girişi (Math Formula Input – LaTeX)',
    description: 'Matematiksel ifade yazma',
    category: 'stem',
    answerType: 'text_input',
    requiresAnswer: true,
    displayOrder: 45,
  },
  {
    id: generateUUID(),
    code: 'chart_interpretation',
    name: 'Grafik Yorumlama (Chart Interpretation)',
    description: 'Grafik/çizelge analizi',
    category: 'stem',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresMedia: true,
    requiresAnswer: true,
    displayOrder: 46,
  },
  {
    id: generateUUID(),
    code: 'table_reading',
    name: 'Tablo Okuma',
    description: 'Tablodaki verileri yorumlama',
    category: 'stem',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 47,
  },
  {
    id: generateUUID(),
    code: 'scientific_experiment',
    name: 'Bilimsel Deney / Simülasyon Sorusu',
    description: 'Sanal deney ortamı',
    category: 'stem',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 48,
  },
  {
    id: generateUUID(),
    code: 'logic_puzzles',
    name: 'Mantık & Bulmaca (Logic Puzzles)',
    description: 'Mantıksal düşünme soruları',
    category: 'stem',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 49,
  },

  // ==================== 6) PERFORMANS & GÖREV BAZLI SORU TİPLERİ ====================
  {
    id: generateUUID(),
    code: 'file_upload',
    name: 'Dosya Yüklemeli Soru (Upload File Answer)',
    description: 'Öğrenci dosya yükleyerek cevaplar',
    category: 'performance',
    answerType: 'file_upload',
    requiresAnswer: true,
    displayOrder: 50,
  },
  {
    id: generateUUID(),
    code: 'scenario_based',
    name: 'Görev Senaryosu (Scenario-based Assessment)',
    description: 'Senaryo tabanlı değerlendirme',
    category: 'performance',
    answerType: 'text_long',
    requiresAnswer: true,
    displayOrder: 51,
  },
  {
    id: generateUUID(),
    code: 'role_play_task',
    name: 'Rol Tabanlı Soru (Role-play Task)',
    description: 'Rol yapma göreviyle soru',
    category: 'performance',
    answerType: 'text_long',
    requiresAnswer: true,
    displayOrder: 52,
  },
  {
    id: generateUUID(),
    code: 'case_study',
    name: 'Case Study – Vaka Analizi',
    description: 'Durum analizi ve çözüm önerisi',
    category: 'performance',
    answerType: 'text_long',
    requiresAnswer: true,
    displayOrder: 53,
  },
  {
    id: generateUUID(),
    code: 'project_document',
    name: 'Proje / Doküman Teslimi',
    description: 'Proje bazlı değerlendirme',
    category: 'performance',
    answerType: 'file_upload',
    requiresAnswer: true,
    displayOrder: 54,
  },
  {
    id: generateUUID(),
    code: 'skill_assessment',
    name: 'Uygulamalı Görev (Skill Assessment)',
    description: 'Beceri ölçme görevi',
    category: 'performance',
    answerType: 'file_upload',
    requiresAnswer: true,
    displayOrder: 55,
  },

  // ==================== 7) ANKET & ÖLÇME-DEĞERLENDİRME SORU TİPLERİ ====================
  {
    id: generateUUID(),
    code: 'likert_scale',
    name: 'Likert Ölçeği',
    description: 'Tutum ölçeği (1-5 derece)',
    category: 'survey',
    answerType: 'options',
    minOptions: 3,
    maxOptions: 7,
    requiresAnswer: true,
    displayOrder: 56,
  },
  {
    id: generateUUID(),
    code: 'rating',
    name: 'Derecelendirme (Rating)',
    description: 'Yıldız/puan verme sistemi',
    category: 'survey',
    answerType: 'options',
    minOptions: 3,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 57,
  },
  {
    id: generateUUID(),
    code: 'choice_explanation',
    name: 'Seç-Ve-Neden? (Choice + Explanation)',
    description: 'Seçim + gerekçe açıklama',
    category: 'survey',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 58,
  },
  {
    id: generateUUID(),
    code: 'emoji_icon_rating',
    name: 'Görsel Dereceleme (Emoji / Icon Rating)',
    description: 'Emoji/ikon ile puanlama',
    category: 'survey',
    answerType: 'options',
    minOptions: 3,
    maxOptions: 7,
    requiresAnswer: true,
    displayOrder: 59,
  },
  {
    id: generateUUID(),
    code: 'conditional_logic',
    name: 'Çok Basamaklı Mantıksal Akış (Conditional Logic Question)',
    description: 'Koşullu mantık akışı',
    category: 'survey',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 60,
  },

  // ==================== 8) ÖZEL – GELİŞMİŞ / AI DESTEKLİ SORU TİPLERİ ====================
  {
    id: generateUUID(),
    code: 'ai_auto_generate',
    name: 'AI Tarafından Üretilen Soru (Auto-Generate Question)',
    description: 'Yapay zeka destekli soru üretimi',
    category: 'ai',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 61,
  },
  {
    id: generateUUID(),
    code: 'ai_auto_grading',
    name: 'AI Otomatik Değerlendirme (AI Auto-Grading)',
    description: 'Yapay zeka destekli otomatik puanlama',
    category: 'ai',
    answerType: 'text_long',
    requiresAnswer: true,
    displayOrder: 62,
  },
  {
    id: generateUUID(),
    code: 'ai_feedback',
    name: 'AI Cevap Geliştirme / Açık Uçlu Değerlendirme',
    description: 'AI destekli geri bildirim',
    category: 'ai',
    answerType: 'text_long',
    requiresAnswer: true,
    displayOrder: 63,
  },
  {
    id: generateUUID(),
    code: 'ai_adaptive_scenario',
    name: 'AI Senaryo Değiştirme (Adaptive Scenario)',
    description: 'Adaptif senaryo üretimi',
    category: 'ai',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 64,
  },
  {
    id: generateUUID(),
    code: 'adaptive_difficulty_irt',
    name: 'Adaptif Sınav Soruları (Adaptive Difficulty – Item Response Theory)',
    description: 'Zorluk derecesi ayarlanan adaptif sorular',
    category: 'ai',
    answerType: 'options',
    minOptions: 2,
    maxOptions: 10,
    requiresAnswer: true,
    displayOrder: 65,
  },
];

// ==================== MOCK SERVICE ====================

class QuestionTypeService extends MockApiService<QuestionType> {
  constructor() {
    super('question_types', 300);
    if (this.storage.getAll().length === 0) {
      this.seed(questionTypesSeedData as QuestionType[]);
    }
  }

  getByCategory(category: string): QuestionType[] {
    const all = this.storage.getAll();
    return all.filter((type: QuestionType) => type.category === category);
  }
}

// ==================== EXPORT ====================

export const questionTypeService = new QuestionTypeService();

