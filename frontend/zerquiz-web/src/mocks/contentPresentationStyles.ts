import { MockApiService } from '../lib/mockApi';
import { generateUUID } from '../lib/mockStorage';

// ==================== TYPES ====================

export interface ContentPresentationStyle {
  id: string;
  code: string;
  name: string;
  description?: string;
  category: 'classic' | 'interactive' | 'multimedia' | 'language' | 'stem' | 'performance' | 'survey' | 'ai';
  supportsOptions: boolean;
  optionDisplayType?: 'text' | 'image' | 'mixed' | 'none';
  requiresMedia?: boolean;
  displayOrder: number;
  createdAt?: string;
  updatedAt?: string;
}

// ==================== 65+ SORU TİPİ (8 KATEGORİ) ====================

const contentPresentationStylesSeedData: Omit<ContentPresentationStyle, 'createdAt' | 'updatedAt'>[] = [
  // ==================== 1) KLASİK SINAV / TEST SORU TİPLERİ (1-13) ====================
  {
    id: generateUUID(),
    code: 'single_choice',
    name: 'Çoktan Seçmeli (Single Choice)',
    description: 'Tek doğru cevaplı klasik test sorusu',
    category: 'classic',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 1,
  },
  {
    id: generateUUID(),
    code: 'multiple_select',
    name: 'Birden Fazla Doğru Cevaplı (MSQ)',
    description: 'Çoklu seçim yapılabilen soru',
    category: 'classic',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 2,
  },
  {
    id: generateUUID(),
    code: 'true_false',
    name: 'Doğru / Yanlış',
    description: 'İki seçenekli doğru-yanlış sorusu',
    category: 'classic',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 3,
  },
  {
    id: generateUUID(),
    code: 'short_answer',
    name: 'Kısa Cevap',
    description: 'Kısa metin yanıtı gerektiren soru',
    category: 'classic',
    supportsOptions: false,
    optionDisplayType: 'none',
    displayOrder: 4,
  },
  {
    id: generateUUID(),
    code: 'essay',
    name: 'Uzun Cevap (Essay)',
    description: 'Detaylı yazılı yanıt gerektiren soru',
    category: 'classic',
    supportsOptions: false,
    optionDisplayType: 'none',
    displayOrder: 5,
  },
  {
    id: generateUUID(),
    code: 'fill_blanks',
    name: 'Boşluk Doldurma (Cloze)',
    description: 'Metin içi boşluk doldurma',
    category: 'classic',
    supportsOptions: false,
    optionDisplayType: 'none',
    displayOrder: 6,
  },
  {
    id: generateUUID(),
    code: 'open_ended',
    name: 'Açık Uçlu Metin',
    description: 'Serbest metin yanıtı',
    category: 'classic',
    supportsOptions: false,
    optionDisplayType: 'none',
    displayOrder: 7,
  },
  {
    id: generateUUID(),
    code: 'numeric_input',
    name: 'Sayısal Cevap',
    description: 'Numerik değer girişi',
    category: 'classic',
    supportsOptions: false,
    optionDisplayType: 'none',
    displayOrder: 8,
  },
  {
    id: generateUUID(),
    code: 'ordering',
    name: 'Sıralama / Sıra Belirleme',
    description: 'Öğeleri doğru sıraya dizme',
    category: 'classic',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 9,
  },
  {
    id: generateUUID(),
    code: 'matching',
    name: 'Eşleştirme (Matching Pairs)',
    description: 'İki liste arasında eşleştirme',
    category: 'classic',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 10,
  },
  {
    id: generateUUID(),
    code: 'table_matching',
    name: 'Tablo Üzerinde Eşleştirme',
    description: 'Tablo formatında eşleştirme',
    category: 'classic',
    supportsOptions: true,
    optionDisplayType: 'mixed',
    displayOrder: 11,
  },
  {
    id: generateUUID(),
    code: 'matrix_type',
    name: 'Kıyaslama / Matrix Type',
    description: 'Matris şeklinde çoklu seçim',
    category: 'classic',
    supportsOptions: true,
    optionDisplayType: 'mixed',
    displayOrder: 12,
  },

  // ==================== 2) İLERİ SEVİYE ETKİLEŞİMLİ SORU TİPLERİ (13-23) ====================
  {
    id: generateUUID(),
    code: 'drag_drop_text',
    name: 'Sürükle-Bırak → Metin',
    description: 'Metin öğelerini sürükle-bırak ile yerleştirme',
    category: 'interactive',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 13,
  },
  {
    id: generateUUID(),
    code: 'drag_drop_image',
    name: 'Sürükle-Bırak → Görsel',
    description: 'Görsel öğeleri sürükle-bırak ile yerleştirme',
    category: 'interactive',
    supportsOptions: true,
    optionDisplayType: 'image',
    displayOrder: 14,
  },
  {
    id: generateUUID(),
    code: 'hotspot',
    name: 'Görüntü Üzerinde İşaretleme (Hotspot)',
    description: 'Görsel üzerinde belirli noktayı işaretleme',
    category: 'interactive',
    supportsOptions: false,
    optionDisplayType: 'none',
    requiresMedia: true,
    displayOrder: 15,
  },
  {
    id: generateUUID(),
    code: 'multi_hotspot',
    name: 'Görüntü Üzerinde Çoklu Nokta İşaretleme',
    description: 'Görsel üzerinde birden fazla nokta işaretleme',
    category: 'interactive',
    supportsOptions: false,
    optionDisplayType: 'none',
    requiresMedia: true,
    displayOrder: 16,
  },
  {
    id: generateUUID(),
    code: 'image_labeling',
    name: 'Etiketleme (Image Labeling)',
    description: 'Görsel öğelerine etiket atama',
    category: 'interactive',
    supportsOptions: true,
    optionDisplayType: 'mixed',
    requiresMedia: true,
    displayOrder: 17,
  },
  {
    id: generateUUID(),
    code: 'map_point',
    name: 'Harita Üzerinde Nokta Seçme',
    description: 'Haritada belirli konumu işaretleme',
    category: 'interactive',
    supportsOptions: false,
    optionDisplayType: 'none',
    requiresMedia: true,
    displayOrder: 18,
  },
  {
    id: generateUUID(),
    code: 'area_selection',
    name: 'Görsel Alan Seçme',
    description: 'Görsel üzerinde alan/bölge seçimi',
    category: 'interactive',
    supportsOptions: false,
    optionDisplayType: 'none',
    requiresMedia: true,
    displayOrder: 19,
  },
  {
    id: generateUUID(),
    code: 'simulation',
    name: 'Simülasyon Tabanlı Soru',
    description: 'Etkileşimli simülasyon ile soru',
    category: 'interactive',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 20,
  },
  {
    id: generateUUID(),
    code: '3d_model',
    name: '3D Model Üzerinde İşaretleme',
    description: '3 boyutlu model üzerinde etkileşim',
    category: 'interactive',
    supportsOptions: false,
    optionDisplayType: 'none',
    requiresMedia: true,
    displayOrder: 21,
  },
  {
    id: generateUUID(),
    code: 'categorize',
    name: 'Sürükle-Bırak Kategori Ayırma',
    description: 'Öğeleri kategorilere sürükle-bırak ile ayırma',
    category: 'interactive',
    supportsOptions: true,
    optionDisplayType: 'mixed',
    displayOrder: 22,
  },

  // ==================== 3) MEDYA / ÇOKLU ORTAM TABANLI SORULAR (23-30) ====================
  {
    id: generateUUID(),
    code: 'video_based',
    name: 'Video Tabanlı Soru',
    description: 'Video izlettirip soru sorma',
    category: 'multimedia',
    supportsOptions: true,
    optionDisplayType: 'text',
    requiresMedia: true,
    displayOrder: 23,
  },
  {
    id: generateUUID(),
    code: 'audio_response',
    name: 'Ses Dinleme – Cevaplama',
    description: 'Ses kaydı dinleyip cevaplama',
    category: 'multimedia',
    supportsOptions: true,
    optionDisplayType: 'text',
    requiresMedia: true,
    displayOrder: 24,
  },
  {
    id: generateUUID(),
    code: 'speech_record',
    name: 'Konuşarak Cevap – Mikrofon Kaydı',
    description: 'Sesli yanıt kaydı alma',
    category: 'multimedia',
    supportsOptions: false,
    optionDisplayType: 'none',
    displayOrder: 25,
  },
  {
    id: generateUUID(),
    code: 'image_prompt',
    name: 'Resim Tabanlı Soru',
    description: 'Görsel ipucu ile soru',
    category: 'multimedia',
    supportsOptions: true,
    optionDisplayType: 'text',
    requiresMedia: true,
    displayOrder: 26,
  },
  {
    id: generateUUID(),
    code: 'gif_animation',
    name: 'GIF / Animasyon İpucuyla Soru',
    description: 'Hareketli görsel ile soru',
    category: 'multimedia',
    supportsOptions: true,
    optionDisplayType: 'text',
    requiresMedia: true,
    displayOrder: 27,
  },
  {
    id: generateUUID(),
    code: 'pdf_based',
    name: 'PDF Üzerinde Soru',
    description: 'Doküman tabanlı değerlendirme',
    category: 'multimedia',
    supportsOptions: true,
    optionDisplayType: 'text',
    requiresMedia: true,
    displayOrder: 28,
  },
  {
    id: generateUUID(),
    code: 'reading_comprehension',
    name: 'Okuma Parçası – Bağlantılı Soru',
    description: 'Uzun metin okutup soru sorma',
    category: 'multimedia',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 29,
  },

  // ==================== 4) YABANCI DİL & AKADEMİK SORU TİPLERİ (30-40) ====================
  {
    id: generateUUID(),
    code: 'listening',
    name: 'Listening (Dinleme)',
    description: 'Yabancı dil dinleme sorusu',
    category: 'language',
    supportsOptions: true,
    optionDisplayType: 'text',
    requiresMedia: true,
    displayOrder: 30,
  },
  {
    id: generateUUID(),
    code: 'speaking',
    name: 'Speaking (Konuşma)',
    description: 'Sözlü ifade değerlendirme',
    category: 'language',
    supportsOptions: false,
    optionDisplayType: 'none',
    displayOrder: 31,
  },
  {
    id: generateUUID(),
    code: 'reading',
    name: 'Reading (Okuduğunu Anlama)',
    description: 'Metin anlama ve yorumlama',
    category: 'language',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 32,
  },
  {
    id: generateUUID(),
    code: 'writing',
    name: 'Writing (Yazma / Kompozisyon)',
    description: 'Yazılı anlatım değerlendirme',
    category: 'language',
    supportsOptions: false,
    optionDisplayType: 'none',
    displayOrder: 33,
  },
  {
    id: generateUUID(),
    code: 'main_idea',
    name: 'Paragrafta Anlam – Ana Fikir',
    description: 'Metnin ana fikrini bulma',
    category: 'language',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 34,
  },
  {
    id: generateUUID(),
    code: 'cloze_test',
    name: 'Cloze Test (Metin içi boşluk)',
    description: 'Metin bütünlüğünde boşluk doldurma',
    category: 'language',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 35,
  },
  {
    id: generateUUID(),
    code: 'synonym_antonym',
    name: 'Kelime – Eş Anlam / Zıt Anlam',
    description: 'Kelime bilgisi soruları',
    category: 'language',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 36,
  },
  {
    id: generateUUID(),
    code: 'translation',
    name: 'Çeviri (Translation)',
    description: 'Diller arası çeviri sorusu',
    category: 'language',
    supportsOptions: false,
    optionDisplayType: 'none',
    displayOrder: 37,
  },
  {
    id: generateUUID(),
    code: 'grammar',
    name: 'Gramer Odaklı Sorular',
    description: 'Dilbilgisi kuralları',
    category: 'language',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 38,
  },
  {
    id: generateUUID(),
    code: 'paragraph_ordering',
    name: 'Paragraf Sıralama / Cümle Sıralama',
    description: 'Metni mantıksal sıraya dizme',
    category: 'language',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 39,
  },
  {
    id: generateUUID(),
    code: 'dialogue_completion',
    name: 'Diyalog Tamamlama',
    description: 'Konuşma metni tamamlama',
    category: 'language',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 40,
  },

  // ==================== 5) KODLAMA / TEKNİK / STEM SORU TİPLERİ (41-50) ====================
  {
    id: generateUUID(),
    code: 'coding',
    name: 'Kod Yazma Sorusu',
    description: 'Programlama kodu yazma',
    category: 'stem',
    supportsOptions: false,
    optionDisplayType: 'none',
    displayOrder: 41,
  },
  {
    id: generateUUID(),
    code: 'code_run',
    name: 'Kod Çalıştırma (Test Cases)',
    description: 'Kod çalıştırıp test etme',
    category: 'stem',
    supportsOptions: false,
    optionDisplayType: 'none',
    displayOrder: 42,
  },
  {
    id: generateUUID(),
    code: 'debugging',
    name: 'Hata Bulma (Debugging)',
    description: 'Koddaki hatayı bulma',
    category: 'stem',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 43,
  },
  {
    id: generateUUID(),
    code: 'output_prediction',
    name: 'Çıktı Tahmini',
    description: 'Kodun çıktısını tahmin etme',
    category: 'stem',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 44,
  },
  {
    id: generateUUID(),
    code: 'math_formula',
    name: 'Matematik Formül Girişi (LaTeX)',
    description: 'Matematiksel ifade yazma',
    category: 'stem',
    supportsOptions: false,
    optionDisplayType: 'none',
    displayOrder: 45,
  },
  {
    id: generateUUID(),
    code: 'chart_interpretation',
    name: 'Grafik Yorumlama',
    description: 'Grafik/çizelge analizi',
    category: 'stem',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 46,
  },
  {
    id: generateUUID(),
    code: 'table_reading',
    name: 'Tablo Okuma',
    description: 'Tablodaki verileri yorumlama',
    category: 'stem',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 47,
  },
  {
    id: generateUUID(),
    code: 'scientific_experiment',
    name: 'Bilimsel Deney / Simülasyon',
    description: 'Sanal deney ortamı',
    category: 'stem',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 48,
  },
  {
    id: generateUUID(),
    code: 'logic_puzzle',
    name: 'Mantık & Bulmaca',
    description: 'Mantıksal düşünme soruları',
    category: 'stem',
    supportsOptions: true,
    optionDisplayType: 'mixed',
    displayOrder: 49,
  },

  // ==================== 6) PERFORMANS & GÖREV BAZLI SORU TİPLERİ (50-56) ====================
  {
    id: generateUUID(),
    code: 'file_upload',
    name: 'Dosya Yüklemeli Soru',
    description: 'Öğrenci dosya yükleyerek cevaplar',
    category: 'performance',
    supportsOptions: false,
    optionDisplayType: 'none',
    displayOrder: 50,
  },
  {
    id: generateUUID(),
    code: 'scenario_based',
    name: 'Görev Senaryosu',
    description: 'Senaryo tabanlı değerlendirme',
    category: 'performance',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 51,
  },
  {
    id: generateUUID(),
    code: 'role_play',
    name: 'Rol Tabanlı Soru',
    description: 'Rol yapma göreviyle soru',
    category: 'performance',
    supportsOptions: false,
    optionDisplayType: 'none',
    displayOrder: 52,
  },
  {
    id: generateUUID(),
    code: 'case_study',
    name: 'Case Study – Vaka Analizi',
    description: 'Durum analizi ve çözüm önerisi',
    category: 'performance',
    supportsOptions: false,
    optionDisplayType: 'none',
    displayOrder: 53,
  },
  {
    id: generateUUID(),
    code: 'project_submission',
    name: 'Proje / Doküman Teslimi',
    description: 'Proje bazlı değerlendirme',
    category: 'performance',
    supportsOptions: false,
    optionDisplayType: 'none',
    displayOrder: 54,
  },
  {
    id: generateUUID(),
    code: 'skill_assessment',
    name: 'Uygulamalı Görev',
    description: 'Beceri ölçme görevi',
    category: 'performance',
    supportsOptions: false,
    optionDisplayType: 'none',
    displayOrder: 55,
  },

  // ==================== 7) ANKET & ÖLÇME-DEĞERLENDİRME SORU TİPLERİ (56-61) ====================
  {
    id: generateUUID(),
    code: 'likert_scale',
    name: 'Likert Ölçeği',
    description: 'Tutum ölçeği (1-5 derece)',
    category: 'survey',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 56,
  },
  {
    id: generateUUID(),
    code: 'rating',
    name: 'Derecelendirme (Rating)',
    description: 'Yıldız/puan verme sistemi',
    category: 'survey',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 57,
  },
  {
    id: generateUUID(),
    code: 'choice_explanation',
    name: 'Seç-Ve-Neden? (Choice + Explanation)',
    description: 'Seçim + gerekçe açıklama',
    category: 'survey',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 58,
  },
  {
    id: generateUUID(),
    code: 'emoji_rating',
    name: 'Görsel Dereceleme (Emoji Rating)',
    description: 'Emoji/ikon ile puanlama',
    category: 'survey',
    supportsOptions: true,
    optionDisplayType: 'image',
    displayOrder: 59,
  },
  {
    id: generateUUID(),
    code: 'conditional_logic',
    name: 'Çok Basamaklı Mantıksal Akış',
    description: 'Koşullu mantık akışı',
    category: 'survey',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 60,
  },

  // ==================== 8) ÖZEL – GELİŞMİŞ / AI DESTEKLİ SORU TİPLERİ (61-65) ====================
  {
    id: generateUUID(),
    code: 'ai_generate',
    name: 'AI Tarafından Üretilen Soru',
    description: 'Yapay zeka destekli soru üretimi',
    category: 'ai',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 61,
  },
  {
    id: generateUUID(),
    code: 'ai_grading',
    name: 'AI Otomatik Değerlendirme',
    description: 'Yapay zeka destekli otomatik puanlama',
    category: 'ai',
    supportsOptions: false,
    optionDisplayType: 'none',
    displayOrder: 62,
  },
  {
    id: generateUUID(),
    code: 'ai_feedback',
    name: 'AI Cevap Geliştirme / Açık Uçlu Değerlendirme',
    description: 'AI destekli geri bildirim',
    category: 'ai',
    supportsOptions: false,
    optionDisplayType: 'none',
    displayOrder: 63,
  },
  {
    id: generateUUID(),
    code: 'ai_adaptive_scenario',
    name: 'AI Senaryo Değiştirme',
    description: 'Adaptif senaryo üretimi',
    category: 'ai',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 64,
  },
  {
    id: generateUUID(),
    code: 'adaptive_difficulty',
    name: 'Adaptif Sınav Soruları (IRT)',
    description: 'Zorluk derecesi ayarlanan adaptif sorular',
    category: 'ai',
    supportsOptions: true,
    optionDisplayType: 'text',
    displayOrder: 65,
  },
];

// ==================== MOCK SERVICE ====================

class ContentPresentationStyleService extends MockApiService<ContentPresentationStyle> {
  constructor() {
    super('content_presentation_styles', 300);
    if (this.storage.getAll().length === 0) {
      this.seed(contentPresentationStylesSeedData as ContentPresentationStyle[]);
    }
  }

  getByCategory(category: string): ContentPresentationStyle[] {
    const all = this.storage.getAll();
    return all.filter((style: ContentPresentationStyle) => style.category === category);
  }
}

// ==================== EXPORT ====================

export const contentPresentationStyleService = new ContentPresentationStyleService();
